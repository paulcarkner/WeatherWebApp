{"ast":null,"code":"import _toConsumableArray from \"C:/Users/Paul/source/repos/paulcarkner/React_Starter_Template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"C:/Users/Paul/source/repos/paulcarkner/React_Starter_Template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/Paul/source/repos/paulcarkner/React_Starter_Template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/Users/Paul/source/repos/paulcarkner/React_Starter_Template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/Paul/source/repos/paulcarkner/React_Starter_Template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nvar _jsxFileName = \"C:\\\\Users\\\\Paul\\\\source\\\\repos\\\\paulcarkner\\\\React_Starter_Template\\\\src\\\\WeatherApp\\\\App.js\";\nimport Style from \"./App.module.css\";\nimport React from 'react';\nimport { fetchForecast, UNIXtoDateTime, getWeatherStyle } from './Utils/Weather.js';\nimport AppBackground from \"./AppBackground\";\nimport LocationModal from \"./LocationModal\";\nimport UI from \"./UI\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar App = /*#__PURE__*/function (_React$Component) {\n  _inherits(App, _React$Component);\n\n  var _super = _createSuper(App);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _super.call(this, props);\n\n    _this.handleLocationChange = function (data) {\n      var locationParams = {\n        lat: data.lat,\n        lon: data.lon,\n        name: data.name,\n        state: data.state,\n        country: data.country\n      };\n\n      if (!_this.state.storedLocations.some(function (loc) {\n        return loc.lat == locationParams.lat && loc.lon == locationParams.lon;\n      })) {\n        _this.setState({\n          storedLocations: [].concat(_toConsumableArray(_this.state.storedLocations), [locationParams])\n        }, function () {\n          _this.saveStoredLocations();\n        });\n      }\n\n      fetchForecast(data.lat, data.lon, \"minutely,alerts\").then(function (forecast) {\n        return _this.setState({\n          location: data,\n          weather: forecast,\n          style: getWeatherStyle(forecast.current.dt * 1000, forecast.current.sunrise * 1000, forecast.current.sunset * 1000, forecast.current.clouds)\n        });\n      });\n    };\n\n    _this.handleRemoveLocation = function () {\n      if (_this.state.storedLocations.length == 1) {\n        alert(\"You cannot remove the last location from your stored locations.\");\n        return;\n      }\n\n      if (!confirm(\"Are you sure you want to remove this location from your stored locations?\")) return;\n\n      var filteredLocations = _this.state.storedLocations.filter(function (loc) {\n        return loc.lat != _this.state.location.lat || loc.lon != _this.state.location.lon;\n      });\n\n      _this.setState({\n        storedLocations: filteredLocations\n      }, function () {\n        _this.saveStoredLocations();\n\n        _this.handleLocationChange(_this.state.storedLocations[0]);\n      });\n    };\n\n    _this.saveStoredLocations = function () {\n      localStorage.setItem(\"WeatherApp_StoredLocations\", JSON.stringify(_this.state.storedLocations));\n    };\n\n    _this.state = {\n      location: null,\n      weather: null,\n      storedLocations: JSON.parse(localStorage.getItem(\"WeatherApp_StoredLocations\")),\n      style: getWeatherStyle(1, 0, 2, 0)\n    };\n    if (_this.state.storedLocations == null || _this.state.storedLocations.length == 0) _this.state.storedLocations = [{\n      \"lat\": -34.9281805,\n      \"lon\": 138.5999312,\n      \"name\": \"Adelaide\",\n      \"state\": \"South Australia\",\n      \"country\": \"AU\"\n    }, {\n      \"lat\": 39.906217,\n      \"lon\": 116.3912757,\n      \"name\": \"Beijing\",\n      \"state\": \"Beijing\",\n      \"country\": \"CN\"\n    }, {\n      \"lat\": -6.8160837,\n      \"lon\": 39.2803583,\n      \"name\": \"Dar es Salaam\",\n      \"country\": \"TZ\"\n    }, {\n      \"lat\": 51.5073219,\n      \"lon\": -0.1276474,\n      \"name\": \"London\",\n      \"state\": \"England\",\n      \"country\": \"GB\"\n    }, {\n      \"lat\": 28.6138954,\n      \"lon\": 77.2090057,\n      \"name\": \"New Delhi\",\n      \"state\": \"Delhi\",\n      \"country\": \"IN\"\n    }, {\n      \"lat\": 43.6534817,\n      \"lon\": -79.3839347,\n      \"name\": \"Toronto\",\n      \"state\": \"Ontario\",\n      \"country\": \"CA\"\n    }, {\n      \"lat\": 49.2608724,\n      \"lon\": -123.113952,\n      \"name\": \"Vancouver\",\n      \"state\": \"British Columbia\",\n      \"country\": \"CA\"\n    }];\n    _this.state.location = _this.state.storedLocations[0];\n    _this.locationModal = /*#__PURE__*/React.createRef();\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.handleLocationChange(this.state.storedLocations[0]);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Style.app,\n        style: {\n          backgroundImage: \"linear-gradient(180deg, hsl(\".concat(this.state.style.gradient.start.hue, \"deg \").concat(this.state.style.gradient.start.sat, \"% \").concat(this.state.style.gradient.start.lum, \"%), hsl(\").concat(this.state.style.gradient.end.hue, \"deg \").concat(this.state.style.gradient.end.sat, \"% \").concat(this.state.style.gradient.end.lum, \"%))\")\n        },\n        children: [/*#__PURE__*/_jsxDEV(AppBackground, {\n          location: this.state.location,\n          weather: this.state.weather,\n          style: this.state.style\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(UI, {\n          location: this.state.location,\n          weather: this.state.weather,\n          storedLocations: this.state.storedLocations,\n          handleLocationChange: this.handleLocationChange,\n          style: this.state.style,\n          locationModalRef: this.locationModal,\n          handleRemoveLocation: this.handleRemoveLocation\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(LocationModal, {\n          ref: this.locationModal,\n          changeHandler: this.handleLocationChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 16\n      }, this);\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport { App as default };","map":{"version":3,"names":["Style","React","fetchForecast","UNIXtoDateTime","getWeatherStyle","AppBackground","LocationModal","UI","App","props","handleLocationChange","data","locationParams","lat","lon","name","state","country","storedLocations","some","loc","setState","saveStoredLocations","then","forecast","location","weather","style","current","dt","sunrise","sunset","clouds","handleRemoveLocation","length","alert","confirm","filteredLocations","filter","localStorage","setItem","JSON","stringify","parse","getItem","locationModal","createRef","app","backgroundImage","gradient","start","hue","sat","lum","end","Component"],"sources":["C:/Users/Paul/source/repos/paulcarkner/React_Starter_Template/src/WeatherApp/App.js"],"sourcesContent":["import Style from \"./App.module.css\";\r\nimport React from 'react';\r\nimport { fetchForecast, UNIXtoDateTime, getWeatherStyle } from './Utils/Weather.js';\r\nimport AppBackground from \"./AppBackground\";\r\nimport LocationModal from \"./LocationModal\";\r\nimport UI from \"./UI\";\r\n\r\nexport default class App extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            location: null,\r\n            weather: null,\r\n            storedLocations: JSON.parse(localStorage.getItem(\"WeatherApp_StoredLocations\")),\r\n            style: getWeatherStyle(1, 0, 2, 0)\r\n        }\r\n        if (this.state.storedLocations == null || this.state.storedLocations.length == 0) this.state.storedLocations = [{ \"lat\": -34.9281805, \"lon\": 138.5999312, \"name\": \"Adelaide\", \"state\": \"South Australia\", \"country\": \"AU\" }, { \"lat\": 39.906217, \"lon\": 116.3912757, \"name\": \"Beijing\", \"state\": \"Beijing\", \"country\": \"CN\" }, { \"lat\": -6.8160837, \"lon\": 39.2803583, \"name\": \"Dar es Salaam\", \"country\": \"TZ\" }, { \"lat\": 51.5073219, \"lon\": -0.1276474, \"name\": \"London\", \"state\": \"England\", \"country\": \"GB\" }, { \"lat\": 28.6138954, \"lon\": 77.2090057, \"name\": \"New Delhi\", \"state\": \"Delhi\", \"country\": \"IN\" }, { \"lat\": 43.6534817, \"lon\": -79.3839347, \"name\": \"Toronto\", \"state\": \"Ontario\", \"country\": \"CA\" }, { \"lat\": 49.2608724, \"lon\": -123.113952, \"name\": \"Vancouver\", \"state\": \"British Columbia\", \"country\": \"CA\" }];\r\n        this.state.location = this.state.storedLocations[0];\r\n        this.locationModal = React.createRef();\r\n    }\r\n\r\n    handleLocationChange = (data) => {\r\n        let locationParams = { lat: data.lat, lon: data.lon, name: data.name, state: data.state, country: data.country };\r\n        if (!this.state.storedLocations.some(loc => loc.lat == locationParams.lat && loc.lon == locationParams.lon)) {\r\n            this.setState({ storedLocations: [...this.state.storedLocations, locationParams] }, () => {\r\n                this.saveStoredLocations();\r\n            });\r\n\r\n        }\r\n        fetchForecast(data.lat, data.lon, \"minutely,alerts\").then(forecast => this.setState({ location: data, weather: forecast, style: getWeatherStyle(forecast.current.dt * 1000, forecast.current.sunrise * 1000, forecast.current.sunset * 1000, forecast.current.clouds) }));\r\n    }\r\n\r\n    handleRemoveLocation = () => {\r\n        if (this.state.storedLocations.length == 1) {\r\n            alert(\"You cannot remove the last location from your stored locations.\");\r\n            return;\r\n        }\r\n        if (!confirm(\"Are you sure you want to remove this location from your stored locations?\")) return;\r\n        let filteredLocations = this.state.storedLocations.filter(loc => loc.lat != this.state.location.lat || loc.lon != this.state.location.lon);\r\n        this.setState({ storedLocations: filteredLocations }, () => {\r\n            this.saveStoredLocations();\r\n            this.handleLocationChange(this.state.storedLocations[0]);\r\n        });\r\n    }\r\n\r\n    saveStoredLocations = () => {\r\n        localStorage.setItem(\"WeatherApp_StoredLocations\", JSON.stringify(this.state.storedLocations));\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.handleLocationChange(this.state.storedLocations[0]);\r\n    }\r\n\r\n    render() {\r\n        return <div className={Style.app} style={{ backgroundImage: `linear-gradient(180deg, hsl(${this.state.style.gradient.start.hue}deg ${this.state.style.gradient.start.sat}% ${this.state.style.gradient.start.lum}%), hsl(${this.state.style.gradient.end.hue}deg ${this.state.style.gradient.end.sat}% ${this.state.style.gradient.end.lum}%))` }} >\r\n            <AppBackground location={this.state.location} weather={this.state.weather} style={this.state.style} />\r\n            <UI location={this.state.location} weather={this.state.weather} storedLocations={this.state.storedLocations} handleLocationChange={this.handleLocationChange} style={this.state.style} locationModalRef={this.locationModal} handleRemoveLocation={this.handleRemoveLocation } />\r\n            <LocationModal ref={this.locationModal} changeHandler={this.handleLocationChange} />\r\n        </div>;\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}